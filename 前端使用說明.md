# ğŸŒ å‰ç«¯å•Ÿå‹•æŒ‡å—

## ğŸš€ å•Ÿå‹•æ–¹å¼

### æ–¹æ³• 1ï¼šä½¿ç”¨ Makeï¼ˆæ¨è–¦ï¼‰

```bash
make dev
```

å•Ÿå‹• Vite é–‹ç™¼ä¼ºæœå™¨ï¼Œè‡ªå‹•é–‹å•Ÿ http://localhost:3000

### æ–¹æ³• 2ï¼šä½¿ç”¨å•Ÿå‹•è…³æœ¬

```bash
./å•Ÿå‹•å‰ç«¯.sh
```

è‡ªå‹•æª¢æŸ¥ç’°å¢ƒã€å®‰è£ç¼ºå°‘çš„ä¾è³´å¾Œå•Ÿå‹•ã€‚

### æ–¹æ³• 3ï¼šç›´æ¥ä½¿ç”¨ npm

```bash
npm run dev
```

---

## ğŸ“ å‰ç«¯æ¶æ§‹

å‰ç«¯ä½¿ç”¨ **React 18 + TypeScript + Vite 7**ï¼Œå·²æ‹†åˆ†ç‚ºæ¨¡çµ„åŒ–å…ƒä»¶ï¼š

```
src/
â”œâ”€â”€ types.ts             # å…±ç”¨å‹åˆ¥å®šç¾©
â”œâ”€â”€ constants.ts         # å¸¸æ•¸ï¼ˆé–¾å€¼ã€é¡è‰²ï¼‰
â”œâ”€â”€ dcf-engine.ts        # å…©éšæ®µ DCF ä¼°å€¼å¼•æ“
â”œâ”€â”€ useDCF.ts            # DCF è¨ˆç®— hook
â”œâ”€â”€ usePortfolioData.ts  # è³‡æ–™è¼‰å…¥ / åŒæ­¥ hook
â”œâ”€â”€ services/api.ts      # API å°è£ï¼ˆfetch + åŒæ­¥ï¼‰
â”œâ”€â”€ main.jsx             # React æ‡‰ç”¨ç¨‹å¼å…¥å£
â”œâ”€â”€ dashboard.tsx        # ä¸»å„€è¡¨æ¿ï¼ˆç¯©é¸ã€æ’åºã€åˆ‡æ›è¦–åœ–ï¼‰
â”œâ”€â”€ DetailPanel.tsx      # å€‹è‚¡æ·±åº¦åˆ†æé¢æ¿
â”œâ”€â”€ ManageModal.tsx      # æ–°å¢ / ç§»é™¤æŒè‚¡å½ˆçª—
â”œâ”€â”€ StockRow.tsx         # è¡¨æ ¼åˆ—å…ƒä»¶
â”œâ”€â”€ StockCard.tsx        # å¡ç‰‡å…ƒä»¶
â”œâ”€â”€ MiniBar.tsx          # è¿·ä½ å®‰å…¨é‚Šéš›é€²åº¦æ¢
â””â”€â”€ HistoryChart.tsx     # æ­·å²èµ°å‹¢åœ–ï¼ˆåƒ¹æ ¼ã€ROEã€EPSï¼‰
```

### åŸ·è¡Œæµç¨‹

1. `make dev` å•Ÿå‹• Vite é–‹ç™¼ä¼ºæœå™¨ï¼ˆport 3000ï¼‰
2. ç€è¦½å™¨è¼‰å…¥ `index.html`
3. `index.html` è¼‰å…¥ `src/main.jsx`
4. `main.jsx` æ¸²æŸ“ `dashboard.tsx`
5. `usePortfolioData` hook è®€å– `public/stock_data.json`
6. `useDCF` hook è¨ˆç®—æ¯æ”¯è‚¡ç¥¨çš„å…§åœ¨åƒ¹å€¼èˆ‡å®‰å…¨é‚Šéš›

### è³‡æ–™ä¾†æº

- **æŒè‚¡å¿«ç…§**ï¼š`public/stock_data.json`ï¼ˆç”± `make sync` ç”¢ç”Ÿï¼‰
- **æ­·å²èµ°å‹¢**ï¼š`public/history/*.json`ï¼ˆç”± `make export` ç”¢ç”Ÿï¼‰
- **ç®¡ç†æ“ä½œ**ï¼šDev server middlewareï¼ˆ`vite.config.js`ï¼‰ä»£ç† `/api/sync` åˆ° `sync_portfolio.py`

---

## ğŸ¯ å¸¸è¦‹ä½¿ç”¨å ´æ™¯

### å ´æ™¯ 1ï¼šæ¯å¤©æŸ¥çœ‹æŒè‚¡

```bash
make dev
# ç€è¦½å™¨é–‹å•Ÿ http://localhost:3000
# æŸ¥çœ‹å®Œç•¢ï¼šCtrl + C
```

### å ´æ™¯ 2ï¼šæ–°å¢ / ç§»é™¤æŒè‚¡

åœ¨å„€è¡¨æ¿å³ä¸Šè§’é»æ“Šã€Œç®¡ç†ã€æŒ‰éˆ•ï¼Œé€éå½ˆçª—æ“ä½œã€‚  
å¾Œç«¯æœƒè‡ªå‹•ä¿®æ”¹ `stock_config.local.json` ä¸¦é‡æ–°åŒæ­¥ã€‚

### å ´æ™¯ 3ï¼šé–‹ç™¼ / ä¿®æ”¹å‰ç«¯

```bash
make dev
# ä¿®æ”¹ src/ ä¸‹çš„ .tsx æª”æ¡ˆ
# å„²å­˜å¾Œ Vite HMR è‡ªå‹•ç†±æ›´æ–°
```

### å ´æ™¯ 4ï¼šå»ºç½®ç”Ÿç”¢ç‰ˆæœ¬

```bash
make build    # è¼¸å‡ºåˆ° dist/
```

---

## ğŸ”§ å•Ÿå‹•æ–¹å¼æ¯”è¼ƒ

| æ–¹å¼ | å‘½ä»¤ | ç‰¹é» |
|------|------|------|
| **Make** | `make dev` | ç°¡æ½”ä¸€è‡´ï¼ˆæ¨è–¦ï¼‰ |
| **å•Ÿå‹•è…³æœ¬** | `./å•Ÿå‹•å‰ç«¯.sh` | è‡ªå‹•æª¢æŸ¥ç’°å¢ƒ |
| **npm** | `npm run dev` | æ¨™æº– Node.js æ–¹å¼ |
| **å»ºç½®** | `make build` | ç”¢ç”Ÿéœæ…‹æª”æ¡ˆ |

---

## ğŸ§ª æ¸¬è©¦èˆ‡é©—è­‰

```bash
make test       # åŸ·è¡Œ DCF å¼•æ“æ¸¬è©¦ï¼ˆ12 çµ„ï¼‰
npx tsc --noEmit  # TypeScript å‹åˆ¥æª¢æŸ¥
make validate   # é©—è­‰ JSON schema
```

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼š`npm run dev` æ‰¾ä¸åˆ°å‘½ä»¤

```bash
# macOS
brew install node
```

### å•é¡Œ 2ï¼šç«¯å£ 3000 è¢«ä½”ç”¨

```bash
lsof -ti:3000 | xargs kill -9
```

### å•é¡Œ 3ï¼šçœ‹ä¸åˆ°æŒè‚¡è³‡æ–™

```bash
# 1. ç¢ºèª JSON å­˜åœ¨
ls -lh public/stock_data.json

# 2. å¦‚æœä¸å­˜åœ¨ï¼ŒåŒæ­¥è³‡æ–™
make sync

# 3. æŸ¥çœ‹ç€è¦½å™¨ Consoleï¼ˆF12ï¼‰æ˜¯å¦æœ‰éŒ¯èª¤
```

### å•é¡Œ 4ï¼šTypeScript ç·¨è­¯éŒ¯èª¤

```bash
npx tsc --noEmit   # æŸ¥çœ‹æ‰€æœ‰å‹åˆ¥éŒ¯èª¤
```

---

## ğŸ“‹ å¿«é€Ÿåƒè€ƒ

| æŒ‡ä»¤ | èªªæ˜ |
|------|------|
| `make dev` | å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ |
| `make build` | å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬ |
| `make sync` | åŒæ­¥æŒè‚¡è³‡æ–™ |
| `make test` | åŸ·è¡Œæ¸¬è©¦ |
| `make clean` | æ¸…é™¤å¿«å– |

**æ—¥å¸¸ä½¿ç”¨**ï¼š`make dev` â†’ æŸ¥çœ‹ â†’ `Ctrl + C` é—œé–‰
